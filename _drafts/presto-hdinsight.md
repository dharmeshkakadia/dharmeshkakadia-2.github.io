---
published: false
---
## Presto on HDInsight

How to run Presto on HDInsight
If you are faimilier with presto and want to 

WASB support.
https://github.com/dharmeshkakadia/presto-hdinsight/blob/master/createsliderbuild.sh


# What is Presto?
Presto is a distributed SQL query engine for big data.
Its known for being fast

It supports querying data in wide range of format including Parquet, ORC, Text, RCFile and so on.
The presto 

# Presto Architecture
To understand how does presto works, lets looks at the presto architecture. The below figures are taken from presto website and facebook presentations.

![presto-overview.png]({{site.baseurl}}/images/presto-overview.png)


The 

![presto-arch.png]({{site.baseurl}}/images/presto-arch.png)


Presto connector architecutre, 
Each connector implements two APIs 
1. Metadata API
2. Data streaming API

![presto-internals.png]({{site.baseurl}}/images/presto-internals.png)


# Currently avilable connectors

Some of the popular examples of [connectors](https://prestodb.io/docs/current/connector.html) include [Kafka](https://prestodb.io/docs/current/connector/kafka.html), [Cassandra](https://prestodb.io/docs/current/connector/cassandra.html), [Hive](https://prestodb.io/docs/current/connector/hive.html), [Accumulo](https://prestodb.io/docs/current/connector/accumulo.html), [MongoDB](https://prestodb.io/docs/current/connector/mongodb.html), [MySQL](https://prestodb.io/docs/current/connector/mysql.html), [PostegreSQL](https://prestodb.io/docs/current/connector/postgresql.html), [Redis](https://prestodb.io/docs/current/connector/redis.html) and so on.

The HDInsight script only confgiures hive and [TPCH](https://prestodb.io/docs/current/connector/tpch.html) connetors by default. If you want to add other conenctors, following the instructions below.

# Use cases
While presto is very successfully used by nuber of orgnizations for their fast data anlysis needs,
One of the prime aspect that caught my attention was the ability to query various data sources in a single query. This is so magical âœ¨, let me give you an example,


This obviates the need to bring the all the data manged under the same system. This in my opinion is so important since, the world where each system wants to be the _only_ system to store and process data.
The reality however is that each system makes different tradeoffs and are fit and serve only part of the larger picture.

Presto supprts wide range of [inbuilt and user defined functions](https://prestodb.io/docs/current/functions.html)

The SQL syntax should make you feel home.

# Presto UI
![prestoui.png]({{site.baseurl}}/images/prestoui.png)


# Airpal
Airpal is the web query interface for presto

![airpla-demo.gif]({{site.baseurl}}/images/airpla-demo.gif)

You can install Airpal in HDInsight on an Edge node using [airpal-deploy.json](https://github.com/dharmeshkakadia/presto-hdinsight/blob/master/airpal-deploy.json). The step by step by instruction is listed in the [README](https://github.com/dharmeshkakadia/presto-hdinsight#airpal)

Note that with little work, you can combine both the installation with a single azure deployment template.

JDBC/ODBC drivers are available which allow you to connect to wide range of tools for querying. Ofcourse Presto has [client libraries in wide range of lanugauges](https://prestodb.io/docs/current/admin/tuning.html) if you prefer.

# Who is using Presto?
Presto started out at Facebook and has gained a lot of momentum at many organizations. Some of the 


# Step by Step instructions

![presto-install-steps.gif]({{site.baseurl}}/images/presto-install-steps.gif)


# Customizing installation

https://github.com/dharmeshkakadia/presto-hdinsight#how-do-i-customize-presto-installation

All the configs are generated by [createconfigs.sh](https://github.com/dharmeshkakadia/presto-hdinsight/blob/master/createconfigs.sh) script.

## JVM configuration

https://prestodb.io/docs/current/admin/tuning.html


## Connector configuration 




# Inner details
If you are interestred in the details of what is the above script doing, let me break it down.

[installpresto.sh](https://github.com/dharmeshkakadia/presto-hdinsight/blob/master/installpresto.sh) is the script invoked by custome script action. It does mainly the following things:

We use [Slider](https://github.com/prestodb/presto-yarn) to manage presto resources through YARN. In a N node standalone cluster with this script means it will create N-2 containers with maximum memory, 1 slider AM that monitors any failed containers and relaunches it a presto co-ordinator.

1. Download the the github repo.
2. Create a build presto build that has support of Windows Azure Storage Blob (WASB). Note that this step is required since the WASB support has not [merged](https://github.com/prestodb/presto-hadoop-apache2/pull/14) in the upstream Presto yet. The script builds the package under ``/var/lib/presto/`` on the primary headnode.
3. Install the created slider package.
4. Create appropriate presto configuration files for the presto slider package.- JVM
5. Start the presto with slider.
6. Wait for the presto to come up and install preso-cli.


How to run presto TPCDS article link

https://github.com/dharmeshkakadia/presto-hdinsight

https://prestodb.io/
